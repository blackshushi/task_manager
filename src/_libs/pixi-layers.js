pixi_display||(pixi_display={}),Object.assign(PIXI.Container.prototype,{renderWebGL:function(e){this._activeParentLayer&&this._activeParentLayer!=e._activeLayer||(this.visible?(this.displayOrder=e.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||this.containerRenderWebGL(e)):this.displayOrder=0)},renderCanvas:function(e){this._activeParentLayer&&this._activeParentLayer!=e._activeLayer||(this.visible?(this.displayOrder=e.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||this.containerRenderCanvas(e)):this.displayOrder=0)},containerRenderWebGL:PIXI.Container.prototype.renderWebGL,containerRenderCanvas:PIXI.Container.prototype.renderCanvas}),Object.assign(PIXI.DisplayObject.prototype,{parentLayer:null,_activeParentLayer:null,parentGroup:null,zOrder:0,zIndex:0,updateOrder:0,displayOrder:0,layerableChildren:!0}),PIXI.particles&&PIXI.particles.ParticleContainer?PIXI.particles.ParticleContainer.prototype.layerableChildren=!1:PIXI.ParticleContainer&&(PIXI.ParticleContainer.prototype.layerableChildren=!1);var pixi_display,__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();!function(e){var t=function(i){function n(e,t){var r=i.call(this)||this;return r._activeLayer=null,r._activeStage=null,r._activeChildren=[],r._lastUpdateId=-1,r.useRenderTexture=!1,r.clearColor=new Float32Array([0,0,0,0]),r.canDrawWithoutLayer=!1,r.canDrawInParentStage=!0,r.zIndex=0,r.enableSort=!1,r._tempResult=[],r._tempZero=[],r.useZeroOptimization=!1,r.zIndex=e,r.enableSort=!!t,"function"==typeof t&&r.on("sort",t),r}return __extends(n,i),n.prototype.doSort=function(e,t){if(this.listeners("sort",!0))for(var r=0;r<t.length;r++)this.emit("sort",t[r]);this.useZeroOptimization?this.doSortWithZeroOptimization(e,t):t.sort(n.compareZIndex)},n.compareZIndex=function(e,t){return e.zIndex!==t.zIndex?e.zIndex-t.zIndex:e.zOrder>t.zOrder?-1:e.zOrder<t.zOrder?1:e.updateOrder-t.updateOrder},n.prototype.doSortWithZeroOptimization=function(e,t){throw new Error("not implemented yet")},n.prototype.clear=function(){this._activeLayer=null,this._activeStage=null,this._activeChildren.length=0},n.prototype.addDisplayObject=function(e,t){this.check(e),t._activeParentLayer=this._activeLayer,this._activeLayer?this._activeLayer._activeChildren.push(t):this._activeChildren.push(t)},n.prototype.foundLayer=function(e,t){this.check(e),null!=this._activeLayer&&n.conflict(),this._activeLayer=t,this._activeStage=e},n.prototype.foundStage=function(e){this._activeLayer||this.canDrawInParentStage||this.clear()},n.prototype.check=function(e){if(this._lastUpdateId<n._layerUpdateId)this._lastUpdateId=n._layerUpdateId,this.clear(),this._activeStage=e;else if(this.canDrawInParentStage){for(var t=this._activeStage;t&&t!=e;)t=t._activeParentStage;if(null==(this._activeStage=t))return void this.clear()}},n.conflict=function(){n._lastLayerConflict+5e3<Date.now()&&(n._lastLayerConflict=Date.now(),console.log("PIXI-display plugin found two layers with the same group in one stage - that's not healthy. Please place a breakpoint here and debug it"))},n._layerUpdateId=0,n._lastLayerConflict=0,n}(PIXI.utils.EventEmitter);e.Group=t}(pixi_display||(pixi_display={})),function(e){var t=PIXI.interaction.InteractionManager;Object.assign(t.prototype,{_queue:[[],[]],_displayProcessInteractive:function(e,t,r,i,n){if(!t||!t.visible)return 0;var a=0,s=i=t.interactive||i;t.hitArea&&(s=!1),t._activeParentLayer&&(n=!1);var o=t._mask;r<1/0&&o&&(o.containsPoint(e)||(n=!0)),r<1/0&&t.filterArea&&(t.filterArea.contains(e.x,e.y)||(n=!0));var l=t.children;if(t.interactiveChildren&&l)for(var h=l.length-1;0<=h;h--){var d=l[h],p=this._displayProcessInteractive(e,d,r,s,n);if(p){if(!d.parent)continue;r=a=p}}return i&&(n?t.interactive&&this._queueAdd(t,0):(r<t.displayOrder&&(t.hitArea?(t.worldTransform.applyInverse(e,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(a=t.displayOrder)):t.containsPoint&&t.containsPoint(e)&&(a=t.displayOrder)),t.interactive&&this._queueAdd(t,a===1/0?0:a))),a},processInteractive:function(e,t,r,i,n){var a=null,s=null;s=e.data&&e.data.global?(a=e).data.global:e,this._startInteractionProcess(),this._displayProcessInteractive(s,t,i?0:1/0,!1),this._finishInteractionProcess(a,r)},_startInteractionProcess:function(){this._eventDisplayOrder=1,this._queue||(this._queue=[[],[]]),this._queue[0].length=0,this._queue[1].length=0},_queueAdd:function(e,t){var r=this._queue;if(t<this._eventDisplayOrder)r[0].push(e);else{if(t>this._eventDisplayOrder){this._eventDisplayOrder=t;for(var i=r[1],n=0;n<i.length;n++)r[0].push(i[n]);r[1].length=0}r[1].push(e)}},_finishInteractionProcess:function(e,t){for(var r=this._queue,i=r[0],n=0;n<i.length;n++)e?t&&t(e,i[n],!1):t(i[n],!1);for(i=r[1],n=0;n<i.length;n++)e?(e.target||(e.target=i[n]),t&&t(e,i[n],!0)):t(i[n],!0)}})}(pixi_display||(pixi_display={})),function(i){var e=function(r){function e(e){void 0===e&&(e=null);var t=r.call(this)||this;return t.isLayer=!0,t.group=null,t._activeChildren=[],t._tempChildren=null,t._activeStageParent=null,t._sortedChildren=[],t._tempLayerParent=null,t._thisRenderTexture=null,t._tempRenderTarget=null,t.insertChildrenBeforeActive=!0,t.insertChildrenAfterActive=!0,null!=e?(t.group=e,t.zIndex=e.zIndex):t.group=new i.Group(0,!1),t._tempChildren=t.children,t}return __extends(e,r),e.prototype.beginWork=function(e){var t=this._activeChildren;this._activeStageParent=e,this.group.foundLayer(e,this);for(var r=this.group._activeChildren,i=t.length=0;i<r.length;i++)r[i]._activeParentLayer=this,t.push(r[i]);r.length=0},e.prototype.endWork=function(){for(var e=this.children,t=this._activeChildren,r=this._sortedChildren,i=0;i<t.length;i++)this.emit("display",t[i]);if(r.length=0,this.insertChildrenBeforeActive)for(i=0;i<e.length;i++)r.push(e[i]);for(i=0;i<t.length;i++)r.push(t[i]);if(!this.insertChildrenBeforeActive&&this.insertChildrenAfterActive)for(i=0;i<e.length;i++)r.push(e[i]);this.group.enableSort&&this.doSort()},Object.defineProperty(e.prototype,"useRenderTexture",{get:function(){return this.group.useRenderTexture},set:function(e){this.group.useRenderTexture=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clearColor",{get:function(){return this.group.clearColor},set:function(e){this.group.clearColor=e},enumerable:!0,configurable:!0}),e.prototype.getRenderTexture=function(){return this._thisRenderTexture||(this._thisRenderTexture=PIXI.RenderTexture.create(100,100)),this._thisRenderTexture},e.prototype.updateDisplayLayers=function(){},e.prototype.doSort=function(){this.group.doSort(this,this._sortedChildren)},e.prototype._preRender=function(e){return(!this._activeParentLayer||this._activeParentLayer==e._activeLayer)&&(this.visible?(this.displayOrder=e.incDisplayOrder(),!(this.worldAlpha<=0||!this.renderable)&&(this.children!==this._sortedChildren&&this._tempChildren!=this.children&&(this._tempChildren=this.children),this._boundsID++,this.children=this._sortedChildren,this._tempLayerParent=e._activeLayer,e._activeLayer=this,!0)):(this.displayOrder=0,!1))},e.prototype._postRender=function(e){this.children=this._tempChildren,e._activeLayer=this._tempLayerParent,this._tempLayerParent=null},e.prototype._pushTexture=function(e){var t=e.screen;this._thisRenderTexture||(this._thisRenderTexture=PIXI.RenderTexture.create(t.width,t.height,null,e.resolution));var r=this._thisRenderTexture;r.width===t.width&&r.height===t.height&&r.baseTexture.resolution===e.resolution||(r.baseTexture.resolution=e.resolution,r.resize(t.width,t.height)),this._tempRenderTarget=e._activeRenderTarget,e.currentRenderer.flush(),e.bindRenderTexture(r,void 0),this.group.clearColor&&e.clear(this.group.clearColor)},e.prototype._popTexture=function(e){e.currentRenderer.flush(),e.bindRenderTarget(this._tempRenderTarget),this._tempRenderTarget=null},e.prototype.renderWebGL=function(e){this._preRender(e)&&(this.group.useRenderTexture&&this._pushTexture(e),this.containerRenderWebGL(e),this._postRender(e),this.group.useRenderTexture&&this._popTexture(e))},e.prototype.renderCanvas=function(e){this._preRender(e)&&(this.containerRenderCanvas(e),this._postRender(e))},e.prototype.destroy=function(e){this._thisRenderTexture&&this._thisRenderTexture.destroy(!0),r.prototype.destroy.call(this,e)},e}(PIXI.Container);i.Layer=e}(pixi_display||(pixi_display={})),pixi_display||(pixi_display={}),Object.assign(PIXI.WebGLRenderer.prototype,{_lastDisplayOrder:0,_activeLayer:null,incDisplayOrder:function(){return++this._lastDisplayOrder},_oldRender:PIXI.WebGLRenderer.prototype.render,render:function(e,t,r,i,n){t||(this._lastDisplayOrder=0),this._activeLayer=null,e.isStage&&e.updateStage(),this._oldRender(e,t,r,i,n)}}),Object.assign(PIXI.CanvasRenderer.prototype,{_lastDisplayOrder:0,_activeLayer:null,incDisplayOrder:function(){return++this._lastDisplayOrder},_oldRender:PIXI.CanvasRenderer.prototype.render,render:function(e,t,r,i,n){t||(this._lastDisplayOrder=0),this._activeLayer=null,e.isStage&&e.updateStage(),this._oldRender(e,t,r,i,n)}}),function(e){var t=function(t){function a(){var e=t.call(this)||this;return e.isStage=!0,e._tempGroups=[],e._activeLayers=[],e._activeParentStage=null,e}return __extends(a,t),a.prototype.clear=function(){this._activeLayers.length=0,this._tempGroups.length=0},a.prototype.destroy=function(e){this.clear(),t.prototype.destroy.call(this,e)},a.prototype._addRecursive=function(e){if(e.visible){if(e.isLayer){var t=e;this._activeLayers.push(t),t.beginWork(this)}if(e!=this&&e.isStage){e.updateAsChildStage(this)}else{null!=e.parentGroup&&e.parentGroup.addDisplayObject(this,e);var r=e.parentLayer;if(null!=r&&r.group.addDisplayObject(this,e),e.updateOrder=++a._updateOrderCounter,!(e.alpha<=0)&&e.renderable&&e.layerableChildren){var i=e.children;if(i&&i.length)for(var n=0;n<i.length;n++)this._addRecursive(i[n])}}}},a.prototype._updateStageInner=function(){this.clear(),this._addRecursive(this);for(var e=this._activeLayers,t=0;t<e.length;t++)e[t].endWork()},a.prototype.updateAsChildStage=function(e){this._activeParentStage=e,a._updateOrderCounter=0,this._updateStageInner()},a.prototype.updateStage=function(){this._activeParentStage=null,e.Group._layerUpdateId++,this._updateStageInner()},a._updateOrderCounter=0,a}(e.Layer);e.Stage=t}(pixi_display||(pixi_display={})),function(e){PIXI.display=e}(pixi_display||(pixi_display={}));